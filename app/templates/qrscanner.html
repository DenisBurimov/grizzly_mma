{% extends "base.html" %}

{% block links %}
    <link href="{{ url_for('static', filename='css/custom_forms.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/qrscanner.css') }}" rel="stylesheet" media="screen">
{% endblock %}

{% block content %}
<div class="scanner_wrapper mb-5">
<h1 class="my-3">Scan The QR-code:</h1>
<div id="video-container" class="my-2">
    <video id="qr-video"></video>
</div>
<div class="scanner_options">
    <label>
        Highlight Style
        <select id="scan-region-highlight-style-select">
            <option value="default-style">Default style</option>
            <option value="example-style-1">Example custom style 1</option>
            <option value="example-style-2">Example custom style 2</option>
        </select>
    </label>
    <label class="invisible">
        <input id="show-scan-region" type="checkbox">
        Show scan region canvas
    </label>
</div>

<div class="scanner_options">
    <select id="inversion-mode-select">
        <option value="original">Scan original (dark QR code on bright background)</option>
        <option value="invert">Scan with inverted colors (bright QR code on dark background)</option>
        <option value="both">Scan both</option>
    </select>
    <br>
</div>

<div class="scanner_options">
    <b>Device has camera: </b>
        <span id="cam-has-camera"></span>
    <br>
</div>

<div class="scanner_options">
    <b>Preferred camera:</b>
    <select id="cam-list">
        <option value="environment" selected>Environment Facing (default)</option>
        <option value="user">User Facing</option>
    </select>
</div>

<b>Camera has flash: </b>
<span id="cam-has-flash"></span>

<div>
    <button id="flash-toggle">ðŸ“¸ Flash: <span id="flash-state">off</span></button>
</div>

<div class="scanner_options invisible">
    <br>
    <b>Detected QR code: </b>
    <span id="cam-qr-result">None</span>
    <form action="{{ url_for('main.qrscanner') }}" method="post">

        <textarea id="passed_value" name="qr_data"></textarea>
        <input id="send_value" type="submit">
    </form>
</div>

<p>{{info}}</p>


<div class="invisible">
    <b>Last detected at: </b>
    <span id="cam-qr-result-timestamp"></span>
</div>

<div class="scanner_options">
    <button id="start-button" class="qrscanner_button">Start</button>
    <button id="stop-button" class="qrscanner_button">Stop</button>
</div>

<h1>Scan from File:</h1>
<input type="file" id="file-selector">
<b>Detected QR code: </b>
<span id="file-qr-result">None</span>
</div>

<script src="{{ url_for('static', filename='js/qrscanner.js') }}" type="module"></script>
{% endblock %}
